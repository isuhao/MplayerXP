#!/bin/sh
# The simplest configure for win loader

for parm in "$@" ; do
  if test "$parm" = "--help" || test "$parm" = "-help" || test "$parm" = "-h" ; then
    cat << EOF

Usage: $0 [OPTIONS]...

Configuration:
  -h, --help               display this help and exit

Installation directories:
  --prefix=DIR           use this prefix for installing mplayer [/usr/local]

Fine tuning of the installation directories:
  --datadir=DIR          use this prefix for installing machine independent
                         data files (fonts, skins) [PREFIX/share/mplayer]
  --confdir=DIR          use this prefix for installing configuration files
                         [same as datadir]

Program names:
  --program-suffix=SUFX  append SUFX to installed program names

EOF
    exit 0
  fi
done # for parm in ...


# LGB: temporary files
for I in "$TMPDIR" "$TEMPDIR" "/tmp" ; do
  test "$I" && break
done

TMPLOG="configure.log"
rm -f "$TMPLOG"
TMPC="$I/mplayerxp-conf-$RANDOM-$$.c"
TMPCPP="$I/mplayerxp-conf-$RANDOM-$$.cpp"
TMPO="$I/mplayerxp-conf-$RANDOM-$$.o"
TMPS="$I/mplayerxp-conf-$RANDOM-$$.S"

_prefix="/usr/local"
_psuffix=
for ac_option do
  case "$ac_option" in
  --prefix=*)
    _prefix=`echo $ac_option | cut -d '=' -f 2`
    ;;
  --datadir=*)
    _datadir=`echo $ac_option | cut -d '=' -f 2`
    ;;
  --confdir=*)
    _confdir=`echo $ac_option | cut -d '=' -f 2`
    ;;
  --program-suffix=*)
    _psuffix=`echo $ac_option | cut -d '=' -f 2`
    ;;
  *)
    ;;
  esac
done

_prog_alias="mplayerxp$_psuffix"
# Atmos: moved this here, to be correct, if --prefix is specified
test -z "$_datadir" && _datadir="$_prefix/share/$_prog_alias"
test -z "$_confdir" && _confdir="$_datadir"

#############################################################################
echo "Creating config.mak"
cat > config.mak << EOF
# -------- Generated by configure -----------
PROGNAME = $_prog_alias
prefix = $_prefix
DATADIR = $_datadir
CONFDIR = $_confdir

EOF

# Last move:
rm -f "$TMPO" "$TMPC" "$TMPS" "$TMPCPP"
